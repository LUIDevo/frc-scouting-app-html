<html>
  <head>
    <title>Dashboard</title>
  </head>
  <body>
    <div class="content-container">
      <div class="content">
        <div class="top-content">
          <div class="header">Your scouting logs</div>
          <button onclick="clicked()">Create new log</button>
        </div>
        <div id="card-container" class="card-container"></div>
      </div>
    </div>
    
    <script>
      function clicked() {
        window.location.href = "index.html";
      }

function saveGameToLocalStorage() {
  const params = new URLSearchParams(window.location.search);
  const matchNumber = params.get("matchNumber");
  if (!matchNumber) return;

  const gameData = {
    matchNumber,
    teamNumber: params.get("teamNumber") || "N/A",
    scoutId: params.get("scoutId") || "N/A",
    teamPosition: params.get("teamPosition") || "N/A",
    teamColor: params.get("teamColor") || "N/A",
    num_human_goals: params.get("num_human_goals") || 0,
    num_processor_goals: params.get("num_processor_goals") || 0,
    num_missed_goals: params.get("num_missed_goals") || 0,
    num_net_goals: params.get("num_net_goals") || 0,
    num_l1: params.get("num_l1") || 0,
    num_l2: params.get("num_l2") || 0,
    num_l3: params.get("num_l3") || 0,
    num_l4: params.get("num_l4") || 0,
    climbLevel: params.get("climbLevel") || "N/A",
    penalty: params.get("penalty") || "N/A",
    coopertition: params.get("coopertition") || "N/A",
    comments: params.get("comments") || "No comments"
  };

  localStorage.setItem(`match_${matchNumber}`, JSON.stringify(gameData));
}

function loadGames() {
  const container = document.getElementById("card-container");
  container.innerHTML = "";

  Object.keys(localStorage).forEach(key => {
    if (!key.startsWith("match_")) return;
    const game = JSON.parse(localStorage.getItem(key));
    
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="card-content">
        <h3>Match ${game.matchNumber}</h3>
        <p>Team: ${game.teamNumber}</p>
        <p>Scout: ${game.scoutId}</p>
        <p>Comments: ${game.comments}</p>
        <button onclick="viewGame('${game.matchNumber}')">View Details</button>
      </div>
    `;
    container.appendChild(card);
  });
}

function viewGame(matchNumber) {
  console.log("viewGame called with matchNumber:", matchNumber);
  
  const gameData = JSON.parse(localStorage.getItem(`match_${matchNumber}`));
  console.log("Retrieved gameData:", gameData);
  
  if (!gameData) return;
  
  const params = new URLSearchParams(gameData).toString();
  window.location.href = `game.html?${params}`;
}
      window.onload = function() {
        saveGameToLocalStorage();
        loadGames();
      };
    </script>

<style>
  @font-face {
    font-family: "Jetbrains";
    src: url(./fonts/JETBRAINSMONONL-MEDIUM.TTF);
  }
  * {
    box-sizing: border-box;
  }
  html {
    background-color: #1d2021;
    height: 100vh;
  }
  body {
    margin: 0;
    font-family: Jetbrains, sans-serif;
    color: #F9F5D7;
  }
  .content-container {
    padding: 30px;
    display: flex;
    margin-bottom: 32px;
    align-items: center;
    flex-direction: column;
  }
  .content {
    display: flex;
    justify-content: space-between;
    flex-direction: column;
    background-color: #1D2021;
    color: #F9F5D7;
    width: 80%;
  }
  .top-content {
    display: flex;
    width: 100%;
    align-items: center;
    justify-content: space-between;
  }
  .header {
    font-size: 44px;
    text-align: center;
    margin-bottom: 2%;
  }
  .card {
    transition: background-color 0.3s ease-in-out;
    padding: 16px;
    border-radius: 4px;
    align-items: center;
    width: 50%;
    justify-content: center;
    background-color: #F9F5D7;
    color: black;
    border: 1px solid #B1B1B1;
    margin: 8px;
    display: flex;
    flex-direction: column;
  }
  .card.active {
    border: 1px solid #0367FB;
    background: #CAD5F0;
  }
  .button-container {
    display: flex;
    gap: 10px;
  }
  button {
    background: #CAD5F0;
    color: black;
    border: none;
    padding: 12px 24px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 4px;
    font-family: Jetbrains;
  }
</style>
  </body>
</html>
